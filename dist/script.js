import{NumberFuncs,StringFuncs,DateFuncs,Dom,Fetch}from"./scripts/Funcs.js";import"./types.js";let numFn=new NumberFuncs,strFn=new StringFuncs,dateFn=new DateFuncs,dom=new Dom,fetchFn=new Fetch,services=await fetchFn.get("./assets/datas/services.json"),comments=await fetchFn.get("./assets/datas/comments.json"),socials=await fetchFn.get("./assets/datas/socials.json"),title=dom.select("h1"),imgs=await loadServImgs();function loadServImgs(){var e=[];for(let s=0;s<services.length;s++){var t=new Promise(e=>{var t=new Image;t.src=services[s].img,t.alt=services[s].name,e(t)});e.push(t)}return Promise.all(e)}function setServices(){var e=dom.select("#services"),t=e.querySelector("aside");let r=dom.create("div",{class:"grid"}),a=t=>{var e=dom.create("article",{class:"grid service","data-id":t.id}),s=dom.create("div",{class:"grid"}),n=dom.create("h3"),a=imgs.filter(e=>e.alt===t.name)[0],o=dom.create("p");n.textContent=t.name,o.textContent=t.desc,s.append(n,o),e.append(a,s),r.append(e)};for(let e=0;e<services.length;e++){var s=dom.create("button",{class:0===e?"bt selected":"bt","data-service":services[e].id});s.textContent=services[e].name,t.append(s)}a(services[0]),t.addEventListener("click",e=>{e=e.target;if(e instanceof HTMLButtonElement){var s=dom.select("#services .bt.selected");let t=parseInt(e.dataset.service);var n=services.find(e=>e.id===t);n&&(dom.modClass(s,"selected","del"),dom.modClass(e,"selected"),dom.removeChildren(r),a(n))}}),e.append(r)}function setComments(){var t=dom.select("#comments");for(let e=0;e<comments.length;e++){var s=dom.create("article",{class:"comment"}),n=dom.create("img",{src:comments[e].img,alt:"Photo de "+comments[e].name}),a=dom.create("h3"),o=dom.create("p");a.textContent=comments[e].name,o.textContent=comments[e].content,s.append(n,a,o),t.append(s)}}function setSocials(){var t=dom.select("#socials");for(let e=socials.length-1;0<=e;e--){var s=dom.create("a",{class:"link",href:socials[e].link}),n=dom.create("img",{src:socials[e].img});s.append(n,socials[e].name),t.append(s)}}function handleForm(){let n=dom.select("form.form"),a=dom.create("h3"),o=(e,t=100)=>e&&"string"==typeof e&&e.length<=t;n.addEventListener("submit",e=>{e.preventDefault();var e=new FormData(n),t=e.get("name").trim(),s=e.get("mail").trim(),e=e.get("message").trim();o(t)&&o(s)&&o(e)?(dom.removeChildren(n),a.textContent=`Merci ${t} ! Nous vous contacterons sur ${s} üëç`,n.append(a)):dom.notify("Informations incompl√®te.","error")})}setServices(),setComments(),setSocials(),handleForm(),dom.handleTheme([title]),dom.setCopyright();export{numFn,strFn,dateFn,dom,fetchFn};